<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Produits en vente</title>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
      

<style>
        /* Styles de la Modale */
        .modal {
    display: none; /* <-- Assurez-vous que c'est bien 'none' par d√©faut */
    position: fixed; /* Reste en place */
    z-index: 1; /* Par-dessus tout le reste */
    left: 0;
    top: 0;
    width: 100%; /* Largeur totale */
    height: 100%; /* Hauteur totale */
    overflow: auto; /* Permet le d√©filement si n√©cessaire */
    background-color: rgb(0,0,0); /* Couleur de secours */
    background-color: rgba(0,0,0,0.4); /* Noir avec opacit√© */

    /* Ces propri√©t√©s ne sont pas n√©cessaires ici si on veut que 'display: none' soit le par d√©faut */
    /* Elles seront appliqu√©es par le JS quand display devient 'flex' */
    /* justify-content: center; */
    /* align-items: center; */
}

/* Nouveau style pour le centrage quand la modale est affich√©e */
.modal.is-visible {
    display: flex;
    justify-content: center;
    align-items: center;
}

        .modal-content {
            background-color: #fefefe;
            padding: 30px; /* Augment√© pour plus d'espace */
            border: 1px solid #888;
            width: 320px; /* L√©g√®rement plus large */
            border-radius: 10px; /* Coins plus arrondis */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); /* Ombre plus prononc√©e */
            position: relative; /* Pour positionner la croix de fermeture */
            text-align: center; /* Centrer le contenu du modal */
        }

        .close {
            color: #aaa;
            position: absolute; /* Positionne la croix */
            top: 10px;
            right: 15px;
            font-size: 32px; /* Plus grande */
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover,
        .close:focus {
            color: #333;
            text-decoration: none;
        }

        /* Styles pour le formulaire dans la modale */
        .modal-content h3 {
            color: #333;
            margin-bottom: 25px; /* Plus d'espace sous le titre */
            font-size: 24px;
        }

        .modal-content form {
            display: flex;
            flex-direction: column;
            gap: 18px; /* Espacement entre les √©l√©ments du formulaire */
        }

        .modal-content label {
            text-align: left;
            font-weight: bold;
            color: #555;
            font-size: 15px;
            margin-bottom: -10px; /* Remonte le label */
        }

        .modal-content input[type="text"],
        .modal-content input[type="password"] {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            width: calc(100% - 24px); /* Prend toute la largeur moins le padding */
            box-sizing: border-box; /* Inclut padding et border dans la largeur */
        }

        .modal-content button[type="submit"] {
            background-color: #28a745; /* Vert pour le bouton de connexion */
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            margin-top: 10px; /* Espace au-dessus du bouton */
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .modal-content button[type="submit"]:hover {
            background-color: #218838; /* Vert plus fonc√© au survol */
            transform: translateY(-1px); /* L√©ger soul√®vement */
        }

        /* Styles du bouton admin */
        .btn-admin {
            display: inline-block;
            padding: 12px; /* Augment√© l√©g√®rement */
            font-size: 26px; /* Ic√¥ne plus grande */
            color: #fff;
            background-color: #28a745; /* Vert vibrant pour le bouton */
            border-radius: 50%;
            width: 55px; /* Plus grand */
            height: 55px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-decoration: none;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.25);
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .btn-admin:hover {
            background-color: #218838;
            transform: translateY(-2px);
        }
    </style>


      </head>
<body>
        <header class="header-produits">
            <div class="retour-accueil">
              <a href="index.html" class="btn-retour" title="Retour √† l'accueil">
                <i class="fa-solid fa-house"></i>
              </a>
            </div>
          
            <div class="header-texte">
              <h1>Nos Produits en vente</h1>
              <h3>D√©couvrez les tr√©sors de notre ferme : frais, locaux et savoureux üçØü•öüçè</h3>
            </div>
          
            <div class="admin-acces">
      <a href="#" class="btn-admin" title="Acc√®s Administrateur">
    <i class="fa-solid fa-user-shield"></i>
</a>

    </div>
          

      </header>
      <main>
  <section class="produits">
    <h2 style="color: blue;">Produits disponibles</h2>
    <table>
      <thead>
        <tr>
          <th>Produit</th>
          <th>Description</th>
          <th>Prix</th>
          <th>Quantit√© disponible</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Miel de Lavande</td>
          <td>Pot de 250g, r√©colte 2024</td>
          <td>7 ‚Ç¨</td>
          <td>15</td>
        </tr>
        <tr>
          <td>≈íufs frais</td>
          <td>Bo√Æte de 6 ≈ìufs de poules √©lev√©es en plein air</td>
          <td>3 ‚Ç¨</td>
          <td>24</td>
        </tr>
        <tr>
          <td>Pommes</td>
          <td>1kg de pommes bio Gala</td>
          <td>2,50 ‚Ç¨</td>
          <td>30</td>
        </tr>
      </tbody>
    </table>
  </section>
</main>

      <footer>
        <i class="fa-solid fa-map-location-dot"></i> Ferme Le Pr√© Sal√© ‚Äì 123 chemin des Lavandes, 12345 Campagne<br>
        <i class="fa-solid fa-phone"></i> 06 30 87 57 48   ‚Äì   <i class="fa-solid fa-at"></i> contact@lepresale.fr
      </footer>
          <div id="adminLoginModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Connexion Administrateur</h3>

<label for="adminPassword">Mot de passe :</label>
<input type="password" id="adminPassword" required>

<button id="loginBtn">Se connecter</button>
<p id="loginError" style="color: red; display: none;">Mot de passe incorrect</p>


        </div>
    </div>

    <script>
  const adminBtn = document.querySelector('.btn-admin');
  const adminModal = document.getElementById('adminLoginModal');
  const closeModal = adminModal.querySelector('.close');
  const loginBtn = document.getElementById('loginBtn');
  const loginError = document.getElementById('loginError');
  const adminPasswordInput = document.getElementById('adminPassword');
  let isAdmin = false;

  // Identifiants de connexion (ex: admin123)
  const ADMIN_PASSWORD = 'lepresale64@';

  // Restaure les quantit√©s depuis localStorage
  function loadQuantities() {
    const saved = JSON.parse(localStorage.getItem('produitQuantites') || '{}');
    const rows = document.querySelectorAll('tbody tr');
    rows.forEach((row, i) => {
      if (saved[i]) {
        row.cells[3].textContent = saved[i];
      }
    });
  }

  // Sauvegarde les quantit√©s dans localStorage
  function saveQuantities() {
    const rows = document.querySelectorAll('tbody tr');
    const saved = {};
    rows.forEach((row, i) => {
      const input = row.cells[3].querySelector('input');
      saved[i] = input ? input.value : row.cells[3].textContent;
    });
    localStorage.setItem('produitQuantites', JSON.stringify(saved));
  }

  // Activer √©dition des quantit√©s
  function enableEdition() {
    isAdmin = true;
    const rows = document.querySelectorAll('tbody tr');
    rows.forEach(row => {
      const cell = row.cells[3];
      const currentQty = cell.textContent.trim();
      cell.innerHTML = `<input type="number" value="${currentQty}" min="0" style="width: 60px;">`;
    });

    const saveBtn = document.createElement('button');
    saveBtn.id = 'saveBtn';
    saveBtn.textContent = 'üíæ Sauvegarder';
    Object.assign(saveBtn.style, {
      marginTop: '20px',
      padding: '10px 20px',
      fontSize: '16px',
      backgroundColor: '#007BFF',
      color: '#fff',
      border: 'none',
      borderRadius: '5px',
      cursor: 'pointer',
      marginRight: '10px'
    });

    saveBtn.onclick = () => {
      saveQuantities();
      alert('‚úÖ Quantit√©s sauvegard√©es localement !');
    };

    const logoutBtn = document.createElement('button');
    logoutBtn.id = 'logoutBtn';
    logoutBtn.textContent = 'üîí D√©connexion';
    Object.assign(logoutBtn.style, {
      marginTop: '20px',
      padding: '10px 20px',
      fontSize: '16px',
      backgroundColor: '#dc3545',
      color: '#fff',
      border: 'none',
      borderRadius: '5px',
      cursor: 'pointer'
    });

    logoutBtn.onclick = () => {
      disableEdition();
    };

    const section = document.querySelector('.produits');
    section.appendChild(saveBtn);
    section.appendChild(logoutBtn);
  }

  // D√©sactiver le mode admin
  function disableEdition() {
    isAdmin = false;
    const rows = document.querySelectorAll('tbody tr');
    rows.forEach(row => {
      const input = row.cells[3].querySelector('input');
      if (input) {
        row.cells[3].textContent = input.value;
      }
    });
    document.getElementById('saveBtn')?.remove();
    document.getElementById('logoutBtn')?.remove();
  }

  // --- Gestion modale admin ---
  adminBtn.onclick = function (e) {
    e.preventDefault();
    adminModal.classList.add('is-visible');
  };

  closeModal.onclick = function () {
    adminModal.classList.remove('is-visible');
    loginError.style.display = 'none';
  };

  window.onclick = function (event) {
    if (event.target == adminModal) {
      adminModal.classList.remove('is-visible');
      loginError.style.display = 'none';
    }
  };

  loginBtn.onclick = function () {
    const password = adminPasswordInput.value;
    if (password === ADMIN_PASSWORD) {
      adminModal.classList.remove('is-visible');
      adminPasswordInput.value = '';
      loginError.style.display = 'none';
      enableEdition();
    } else {
      loginError.style.display = 'block';
    }
  };

  // Charger les quantit√©s d√®s que la page est pr√™te
  window.onload = function () {
    loadQuantities();
  };
</script>


</body>
</html>
